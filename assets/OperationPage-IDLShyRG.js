import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as m,i as f,j as _,w as a,b as o,o as p,e as N,a as t,f as d,c as i,F as k,k as O,t as w,l as V}from"./index-3epILxad.js";const H={class:"toolbar"},J={key:0},Q={key:1},W={style:{"text-align":"center","margin-top":"12px"}},X={__name:"OperationPage",setup(Y){const M=m(1),b=m(20),n=m({id:"",product_spec:"",range:[],status:""}),F=m([{id:1,timestamp:"2025-10-21 08:03:00",station_no:"2",product_spec:"MAFR-302",ng_items:["M04","M08"],M01:"OK",M02:"OK",M03:"OK",M04:"NG",M05:"OK",M06:"OK",M07:"OK",M08:"NG",M09:"OK",M10:"OK",M11:"OK",M12:"OK",M04_leak:"1.038",M05_leak:"6.499",M08_leak:"0.339",M11_leak:"5.422",suggestion:"吹淨帽型蓋",part:"帽型蓋"},{id:2,timestamp:"2025-10-21 08:06:00",station_no:"4",product_spec:"MAFR-302",ng_items:[],M01:"OK",M02:"OK",M03:"OK",M04:"OK",M05:"OK",M06:"OK",M07:"OK",M08:"OK",M09:"OK",M10:"OK",M11:"OK",M12:"OK",M04_leak:"0.626",M05_leak:"6.255",M08_leak:"0.323",M11_leak:"4.982",suggestion:"產品狀態良好，無需維修",part:"無"}]),x=[{prop:"M01",label:"M01_低壓手動排水閥測試_測試結果"},{prop:"M02",label:"M02_高壓手動排水閥測試_測試結果"},{prop:"M03",label:"M03_低壓內漏調壓_測試結果"},{prop:"M04",label:"M04_低壓內漏測試_測試結果"},{prop:"M05",label:"M05_高壓內漏測試_測試結果"},{prop:"M06",label:"M06_低壓氣密調壓_測試結果"},{prop:"M07",label:"M07_低壓錶孔測試_測試結果"},{prop:"M08",label:"M08_低壓氣密測試_測試結果"},{prop:"M09",label:"M09_高壓氣密調壓_測試結果"},{prop:"M10",label:"M10_高壓錶孔測試_測試結果"},{prop:"M11",label:"M11_高壓氣密測試_測試結果"},{prop:"M12",label:"M12_測試完成調壓_測試結果"}],h=[{prop:"M04_leak",label:"M04_低壓內漏測試_洩漏量"},{prop:"M05_leak",label:"M05_高壓內漏測試_洩漏量"},{prop:"M08_leak",label:"M08_低壓氣密測試_洩漏量"},{prop:"M11_leak",label:"M11_高壓氣密測試_洩漏量"}],C=[{prop:"timestamp",label:"時間"},{prop:"station_no",label:"站點"},{prop:"product_spec",label:"產品規格"},...x,...h],u=m(C.map(r=>r.prop)),S=f(()=>x.filter(r=>u.value.includes(r.prop))),U=f(()=>h.filter(r=>u.value.includes(r.prop))),z=f(()=>F.value.filter(r=>{const l=n.value.id?String(r.id)===String(n.value.id):!0,g=n.value.product_spec?r.product_spec.toLowerCase().includes(n.value.product_spec.toLowerCase()):!0;return l&&g})),R=f(()=>{const r=(M.value-1)*b.value,l=r+b.value;return z.value.slice(r,l)});function B(){M.value=1}function G(){n.value={id:"",product_spec:"",range:[],status:""}}return(r,l)=>{const g=o("el-input"),v=o("el-form-item"),L=o("el-date-picker"),y=o("el-button"),P=o("el-checkbox"),A=o("el-checkbox-group"),I=o("el-popover"),T=o("el-form"),s=o("el-table-column"),K=o("el-tag"),j=o("el-table"),q=o("el-pagination"),D=o("el-card");return p(),_(D,{class:"operation-page"},{default:a(()=>[N("div",H,[t(T,{inline:!0,model:n.value,class:"qform"},{default:a(()=>[t(v,{label:"序號"},{default:a(()=>[t(g,{modelValue:n.value.id,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value.id=e),placeholder:"輸入序號",style:{width:"120px"}},null,8,["modelValue"])]),_:1}),t(v,{label:"產品規格"},{default:a(()=>[t(g,{modelValue:n.value.product_spec,"onUpdate:modelValue":l[1]||(l[1]=e=>n.value.product_spec=e),placeholder:"例如 MAFR-302",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),t(v,{label:"生產時段"},{default:a(()=>[t(L,{modelValue:n.value.range,"onUpdate:modelValue":l[2]||(l[2]=e=>n.value.range=e),type:"datetimerange","range-separator":"至","start-placeholder":"開始","end-placeholder":"結束"},null,8,["modelValue"])]),_:1}),t(v,null,{default:a(()=>[t(y,{type:"primary",onClick:B},{default:a(()=>[...l[6]||(l[6]=[d("查詢",-1)])]),_:1}),t(y,{onClick:G},{default:a(()=>[...l[7]||(l[7]=[d("重置",-1)])]),_:1})]),_:1}),t(I,{trigger:"click",placement:"bottom-end",width:"260"},{reference:a(()=>[t(y,{icon:"el-icon-setting"},{default:a(()=>[...l[8]||(l[8]=[d("欄位設定",-1)])]),_:1})]),default:a(()=>[t(A,{modelValue:u.value,"onUpdate:modelValue":l[3]||(l[3]=e=>u.value=e),class:"col-setting"},{default:a(()=>[(p(),i(k,null,O(C,e=>t(P,{key:e.prop,label:e.prop},{default:a(()=>[d(w(e.label),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),t(j,{data:R.value,border:"",height:"70vh"},{default:a(()=>[t(s,{type:"index",label:"序號",width:"80"}),u.value.includes("timestamp")?(p(),_(s,{key:0,prop:"timestamp",label:"時間",width:"180"})):V("",!0),u.value.includes("station_no")?(p(),_(s,{key:1,prop:"station_no",label:"站點",width:"100"})):V("",!0),u.value.includes("product_spec")?(p(),_(s,{key:2,prop:"product_spec",label:"產品規格",width:"120"})):V("",!0),t(s,{label:"NG 項",width:"160"},{default:a(({row:e})=>[e.ng_items.length?(p(),i("span",J,[(p(!0),i(k,null,O(e.ng_items,c=>(p(),_(K,{key:c,type:"danger",size:"small"},{default:a(()=>[d(w(c),1)]),_:2},1024))),128))])):(p(),i("span",Q,[t(K,{type:"success",size:"small"},{default:a(()=>[...l[9]||(l[9]=[d("OK",-1)])]),_:1})]))]),_:1}),(p(!0),i(k,null,O(S.value,e=>(p(),_(s,{key:e.prop,prop:e.prop,label:e.label,width:"200"},{default:a(({row:c})=>[t(K,{type:c[e.prop]==="NG"?"danger":"success"},{default:a(()=>[d(w(c[e.prop]),1)]),_:2},1032,["type"])]),_:2},1032,["prop","label"]))),128)),(p(!0),i(k,null,O(U.value,e=>(p(),_(s,{key:e.prop,prop:e.prop,label:e.label,width:"180"},null,8,["prop","label"]))),128)),t(s,{label:"維修建議",prop:"suggestion",width:"160"}),t(s,{label:"可能部位",prop:"part",width:"140"})]),_:1},8,["data"]),N("div",W,[t(q,{background:"",layout:"prev, pager, next, sizes, total",total:z.value.length,"current-page":M.value,"onUpdate:currentPage":l[4]||(l[4]=e=>M.value=e),"page-size":b.value,"onUpdate:pageSize":l[5]||(l[5]=e=>b.value=e),"page-sizes":[10,20,50,100]},null,8,["total","current-page","page-size"])])]),_:1})}}},ee=E(X,[["__scopeId","data-v-3e69e8ec"]]);export{ee as default};
